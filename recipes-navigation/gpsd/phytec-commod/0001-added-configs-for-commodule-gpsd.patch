From 78444e5011c5e7f2096e22b20f2a7377dee91a2e Mon Sep 17 00:00:00 2001
From: llewellyn-evo <llewellyn.fernandes@evologics.de>
Date: Thu, 5 Mar 2020 18:48:02 +0100
Subject: [PATCH] added configs for commodule gpsd

---
 packaging/deb/etc_default_gpsd | 4 ++--
 systemd/gpsd.service           | 5 +++--
 2 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/packaging/deb/etc_default_gpsd b/packaging/deb/etc_default_gpsd
index 54ebab6..a71b4b8 100644
--- a/packaging/deb/etc_default_gpsd
+++ b/packaging/deb/etc_default_gpsd
@@ -2,7 +2,7 @@
 # Please do not edit this file directly - use `dpkg-reconfigure gpsd' to
 # change the options.
 START_DAEMON="true"
-GPSD_OPTIONS=""
-DEVICES=""
+GPSD_OPTIONS="-n -D 5 -b"
+DEVICES="/dev/ttymxc2"
 USBAUTO="true"
 GPSD_SOCKET="/var/run/gpsd.sock"
diff --git a/systemd/gpsd.service b/systemd/gpsd.service
index 2707ff9..dc73378 100644
--- a/systemd/gpsd.service
+++ b/systemd/gpsd.service
@@ -2,14 +2,15 @@
 Description=GPS (Global Positioning System) Daemon
 Requires=gpsd.socket
 # Needed with chrony SOCK refclock
-After=chronyd.service
+#After=chronyd.service
 
 [Service]
 Type=forking
 EnvironmentFile=-/etc/default/gpsd
 EnvironmentFile=-/etc/sysconfig/gpsd
+ExecStartPre=/bin/stty -F /dev/ttymxc2 115200 raw
 ExecStart=/usr/sbin/gpsd $GPSD_OPTIONS $OPTIONS $DEVICES
 
 [Install]
 WantedBy=multi-user.target
-Also=gpsd.socket
+Also=gpsd.socket
\ No newline at end of file
