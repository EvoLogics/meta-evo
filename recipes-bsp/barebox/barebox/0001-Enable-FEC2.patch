From ba4276b093fae5f89827ea4e27db04e2361e81bc Mon Sep 17 00:00:00 2001
From: LLewellyn Fernandes <llewellyn.fernandes@evologics.de>
Date: Thu, 11 Jan 2024 16:20:26 +0100
Subject: [PATCH] Enable FEC2

---
 arch/arm/dts/imx6ul-phytec-phycore-som.dtsi   | 25 +++++++++++++++++++
 .../dts/imx6ull-phytec-phycore-som-emmc.dts   |  4 +++
 2 files changed, 29 insertions(+)

diff --git a/arch/arm/dts/imx6ul-phytec-phycore-som.dtsi b/arch/arm/dts/imx6ul-phytec-phycore-som.dtsi
index c7c657bcd4..f519ff3623 100644
--- a/arch/arm/dts/imx6ul-phytec-phycore-som.dtsi
+++ b/arch/arm/dts/imx6ul-phytec-phycore-som.dtsi
@@ -48,9 +48,21 @@
 		ethphy0: ethernet-phy@1 {
 			reg = <1>;
 		};
+		ethphy1: ethernet-phy@2 {
+			reg = <3>;
+		};
 	};
 };
 
+&fec2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet2>;
+	phy-mode = "rmii";
+	phy-handle = <&ethphy1>;
+	status = "disabled";
+};
+
+
 &gpmi {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_gpmi_nand>;
@@ -238,6 +250,19 @@
 				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7 	0x17059
 			>;
 		};
+
+		pinctrl_enet2: enet2grp {
+			fsl,pins = <
+				MX6UL_PAD_ENET2_RX_EN__ENET2_RX_EN	0x1b0b0
+				MX6UL_PAD_ENET2_RX_ER__ENET2_RX_ER	0x1b0b0
+				MX6UL_PAD_ENET2_RX_DATA0__ENET2_RDATA00	0x1b0b0
+				MX6UL_PAD_ENET2_RX_DATA1__ENET2_RDATA01	0x1b0b0
+				MX6UL_PAD_ENET2_TX_EN__ENET2_TX_EN	0x1b010
+				MX6UL_PAD_ENET2_TX_DATA0__ENET2_TDATA00	0x1b010
+				MX6UL_PAD_ENET2_TX_DATA1__ENET2_TDATA01	0x1b010
+				MX6UL_PAD_ENET2_TX_CLK__ENET2_REF_CLK2	0x4001b010
+			>;
+		};
 	};
 };
 
diff --git a/arch/arm/dts/imx6ull-phytec-phycore-som-emmc.dts b/arch/arm/dts/imx6ull-phytec-phycore-som-emmc.dts
index 1f5a067cd5..126152739f 100644
--- a/arch/arm/dts/imx6ull-phytec-phycore-som-emmc.dts
+++ b/arch/arm/dts/imx6ull-phytec-phycore-som-emmc.dts
@@ -21,6 +21,10 @@
 	status = "okay";
 };
 
+&fec2 {
+	status = "okay";
+};
+
 &i2c1 {
 	status = "okay";
 };
-- 
2.25.1

